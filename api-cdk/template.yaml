Description: API-CDK-STACK
Resources:
  apicdkA8EEE5C9:
    Type: AWS::S3::Bucket
    Properties:
      BucketName: api-cdk.huge.head.li
      LifecycleConfiguration:
        Rules:
          - ExpirationInDays: 1
            Status: Enabled
      PublicAccessBlockConfiguration:
        BlockPublicAcls: true
        BlockPublicPolicy: true
        IgnorePublicAcls: true
        RestrictPublicBuckets: true
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: API-CDK-STACK/api-cdk/Resource
  APICDKSTACKLAYER7C9693A7:
    Type: AWS::Lambda::LayerVersion
    Properties:
      Content:
        S3Bucket:
          Ref: AssetParameters034e42a031aebc87c9370f0fb9dbe527e0c4ba0cbddb2e56966f8efa8173cf51S3Bucket0AF3E0E6
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters034e42a031aebc87c9370f0fb9dbe527e0c4ba0cbddb2e56966f8efa8173cf51S3VersionKey6DC69AF7
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters034e42a031aebc87c9370f0fb9dbe527e0c4ba0cbddb2e56966f8efa8173cf51S3VersionKey6DC69AF7
      CompatibleRuntimes:
        - python3.8
      Description: API-CDK-STACK-LAYER
      LayerName: API-CDK-STACK-LAYER
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACK-LAYER/Resource
      aws:asset:path: /home/song/Sandbox/aws-cdk-examples/api-cdk/lambda/Python-layer
      aws:asset:property: Content
  APICDKSTACKMyRole834BC275:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: "2012-10-17"
      RoleName: API-CDK-STACKMyRole
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKMyRole/Resource
  APICDKSTACKMyRoleDefaultPolicy6490C780:
    Type: AWS::IAM::Policy
    Properties:
      PolicyDocument:
        Statement:
          - Action:
              - logs:CreateLogGroup
              - logs:CreateLogStream
              - logs:PutLogEvents
            Effect: Allow
            Resource: "*"
          - Action:
              - s3:GetObject
              - s3:PutObject
            Effect: Allow
            Resource: arn:aws:s3:::*
        Version: "2012-10-17"
      PolicyName: APICDKSTACKMyRoleDefaultPolicy6490C780
      Roles:
        - Ref: APICDKSTACKMyRole834BC275
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKMyRole/DefaultPolicy/Resource
  APICDKSTACKAFunctionbase64FB05D81A:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket:
          Ref: AssetParameters61b51eb846a05d13bcfebe38e3bb9344afcca98f3e700e31bb49587c0eba17e6S3BucketC5C365DC
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters61b51eb846a05d13bcfebe38e3bb9344afcca98f3e700e31bb49587c0eba17e6S3VersionKeyB0F40A0B
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters61b51eb846a05d13bcfebe38e3bb9344afcca98f3e700e31bb49587c0eba17e6S3VersionKeyB0F40A0B
      Role:
        Fn::GetAtt:
          - APICDKSTACKMyRole834BC275
          - Arn
      FunctionName: API-CDK-STACKAFunction-base64
      Handler: index.handler
      Runtime: nodejs12.x
      Timeout: 120
    DependsOn:
      - APICDKSTACKMyRoleDefaultPolicy6490C780
      - APICDKSTACKMyRole834BC275
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAFunction-base64/Resource
      aws:asset:path: /home/song/Sandbox/aws-cdk-examples/api-cdk/lambda/AFunction-base64
      aws:asset:property: Code
  APICDKSTACKAFunctionbase64ApiAccessPermission0B67ED8B:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - APICDKSTACKAFunctionbase64FB05D81A
          - Arn
      Principal: apigateway.amazonaws.com
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAFunction-base64/ApiAccessPermission
  APICDKSTACKAFunctiondownload7F42737A:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket:
          Ref: AssetParameters4ac6bc7fb9d370fe4b779bfaf58aa61892f6642b679b8fdcb6c8ebdafff530b2S3Bucket6F338FE4
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters4ac6bc7fb9d370fe4b779bfaf58aa61892f6642b679b8fdcb6c8ebdafff530b2S3VersionKey2EE7EB44
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters4ac6bc7fb9d370fe4b779bfaf58aa61892f6642b679b8fdcb6c8ebdafff530b2S3VersionKey2EE7EB44
      Role:
        Fn::GetAtt:
          - APICDKSTACKMyRole834BC275
          - Arn
      FunctionName: API-CDK-STACKAFunction-download
      Handler: index.handler
      Runtime: nodejs12.x
      Timeout: 120
    DependsOn:
      - APICDKSTACKMyRoleDefaultPolicy6490C780
      - APICDKSTACKMyRole834BC275
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAFunction-download/Resource
      aws:asset:path: /home/song/Sandbox/aws-cdk-examples/api-cdk/lambda/AFunction-download
      aws:asset:property: Code
  APICDKSTACKAFunctiondownloadApiAccessPermissionA40AE367:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - APICDKSTACKAFunctiondownload7F42737A
          - Arn
      Principal: apigateway.amazonaws.com
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAFunction-download/ApiAccessPermission
  APICDKSTACKAFunctionupload45BDC153:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket:
          Ref: AssetParametersf21a37c59d98e46e3df1a64875a26678a7b70d57c069375fa7a7886903922effS3BucketA3730A56
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParametersf21a37c59d98e46e3df1a64875a26678a7b70d57c069375fa7a7886903922effS3VersionKeyE8C11D18
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParametersf21a37c59d98e46e3df1a64875a26678a7b70d57c069375fa7a7886903922effS3VersionKeyE8C11D18
      Role:
        Fn::GetAtt:
          - APICDKSTACKMyRole834BC275
          - Arn
      FunctionName: API-CDK-STACKAFunction-upload
      Handler: index.handler
      Runtime: nodejs12.x
      Timeout: 120
    DependsOn:
      - APICDKSTACKMyRoleDefaultPolicy6490C780
      - APICDKSTACKMyRole834BC275
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAFunction-upload/Resource
      aws:asset:path: /home/song/Sandbox/aws-cdk-examples/api-cdk/lambda/AFunction-upload
      aws:asset:property: Code
  APICDKSTACKAFunctionuploadApiAccessPermissionA7A4BDBE:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - APICDKSTACKAFunctionupload45BDC153
          - Arn
      Principal: apigateway.amazonaws.com
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAFunction-upload/ApiAccessPermission
  APICDKSTACKAFunctionuploadpython7A5133DA:
    Type: AWS::Lambda::Function
    Properties:
      Code:
        S3Bucket:
          Ref: AssetParameters19ad61d00dd67e19723fb50dc315e6c1da6b8b9f2eac18df76c67b16155e135cS3BucketF2898260
        S3Key:
          Fn::Join:
            - ""
            - - Fn::Select:
                  - 0
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters19ad61d00dd67e19723fb50dc315e6c1da6b8b9f2eac18df76c67b16155e135cS3VersionKey8AFEB58E
              - Fn::Select:
                  - 1
                  - Fn::Split:
                      - "||"
                      - Ref: AssetParameters19ad61d00dd67e19723fb50dc315e6c1da6b8b9f2eac18df76c67b16155e135cS3VersionKey8AFEB58E
      Role:
        Fn::GetAtt:
          - APICDKSTACKMyRole834BC275
          - Arn
      FunctionName: API-CDK-STACKAFunction-upload-python
      Handler: app.lambdaHandler
      Layers:
        - Ref: APICDKSTACKLAYER7C9693A7
      Runtime: python3.8
      Timeout: 120
    DependsOn:
      - APICDKSTACKMyRoleDefaultPolicy6490C780
      - APICDKSTACKMyRole834BC275
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAFunction-upload-python/Resource
      aws:asset:path: /home/song/Sandbox/aws-cdk-examples/api-cdk/lambda/AFunction-upload-python
      aws:asset:property: Code
  APICDKSTACKAFunctionuploadpythonApiAccessPermission19CCDB1F:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - APICDKSTACKAFunctionuploadpython7A5133DA
          - Arn
      Principal: apigateway.amazonaws.com
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAFunction-upload-python/ApiAccessPermission
  APICDKSTACKAPIGWAA193FB7:
    Type: AWS::ApiGateway::RestApi
    Properties:
      BinaryMediaTypes:
        - multipart/form-data
      Description: API-CDK-STACKAPIGW
      EndpointConfiguration:
        Types:
          - REGIONAL
      Name: API-CDK-STACKAPIGW
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAPIGW/Resource
  APICDKSTACKAPIGWCloudWatchRole1B5323E8:
    Type: AWS::IAM::Role
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: apigateway.amazonaws.com
        Version: "2012-10-17"
      ManagedPolicyArns:
        - Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - :iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAPIGW/CloudWatchRole/Resource
  APICDKSTACKAPIGWAccountE4AA8DA7:
    Type: AWS::ApiGateway::Account
    Properties:
      CloudWatchRoleArn:
        Fn::GetAtt:
          - APICDKSTACKAPIGWCloudWatchRole1B5323E8
          - Arn
    DependsOn:
      - APICDKSTACKAPIGWAA193FB7
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAPIGW/Account
  APICDKSTACKAPIGWDeployment2FE7C019a89abc47b0383d16fc38876a9c5419bb:
    Type: AWS::ApiGateway::Deployment
    Properties:
      RestApiId:
        Ref: APICDKSTACKAPIGWAA193FB7
      Description: Automatically created by the RestApi construct
    DependsOn:
      - APICDKSTACKAPIGWbase64OPTIONS65676786
      - APICDKSTACKAPIGWbase64POSTF4EEA77B
      - APICDKSTACKAPIGWbase64EA201051
      - APICDKSTACKAPIGWdownloadGET40EC633C
      - APICDKSTACKAPIGWdownloadOPTIONSE6A94765
      - APICDKSTACKAPIGWdownload8D56EFB7
      - APICDKSTACKAPIGWOPTIONS74E74280
      - APICDKSTACKAPIGWuploadpythonOPTIONS1C6C20BC
      - APICDKSTACKAPIGWuploadpythonPOST3076305A
      - APICDKSTACKAPIGWuploadpythonD7EF7848
      - APICDKSTACKAPIGWuploadOPTIONSAC423301
      - APICDKSTACKAPIGWuploadPOSTC2E4BC2D
      - APICDKSTACKAPIGWupload4022B0EB
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAPIGW/Deployment/Resource
  APICDKSTACKAPIGWDeploymentStageprod2B95DB1B:
    Type: AWS::ApiGateway::Stage
    Properties:
      RestApiId:
        Ref: APICDKSTACKAPIGWAA193FB7
      DeploymentId:
        Ref: APICDKSTACKAPIGWDeployment2FE7C019a89abc47b0383d16fc38876a9c5419bb
      StageName: prod
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAPIGW/DeploymentStage.prod/Resource
  APICDKSTACKAPIGWOPTIONS74E74280:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: OPTIONS
      ResourceId:
        Fn::GetAtt:
          - APICDKSTACKAPIGWAA193FB7
          - RootResourceId
      RestApiId:
        Ref: APICDKSTACKAPIGWAA193FB7
      AuthorizationType: NONE
      Integration:
        IntegrationResponses:
          - ResponseParameters:
              method.response.header.Access-Control-Allow-Headers: "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'"
              method.response.header.Access-Control-Allow-Origin: "'*'"
              method.response.header.Access-Control-Allow-Methods: "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
            StatusCode: "204"
        RequestTemplates:
          application/json: "{ statusCode: 200 }"
        Type: MOCK
      MethodResponses:
        - ResponseParameters:
            method.response.header.Access-Control-Allow-Headers: true
            method.response.header.Access-Control-Allow-Origin: true
            method.response.header.Access-Control-Allow-Methods: true
          StatusCode: "204"
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAPIGW/Default/OPTIONS/Resource
  APICDKSTACKAPIGWbase64EA201051:
    Type: AWS::ApiGateway::Resource
    Properties:
      ParentId:
        Fn::GetAtt:
          - APICDKSTACKAPIGWAA193FB7
          - RootResourceId
      PathPart: base64
      RestApiId:
        Ref: APICDKSTACKAPIGWAA193FB7
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAPIGW/Default/base64/Resource
  APICDKSTACKAPIGWbase64OPTIONS65676786:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: OPTIONS
      ResourceId:
        Ref: APICDKSTACKAPIGWbase64EA201051
      RestApiId:
        Ref: APICDKSTACKAPIGWAA193FB7
      AuthorizationType: NONE
      Integration:
        IntegrationResponses:
          - ResponseParameters:
              method.response.header.Access-Control-Allow-Headers: "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'"
              method.response.header.Access-Control-Allow-Origin: "'*'"
              method.response.header.Access-Control-Allow-Methods: "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
            StatusCode: "204"
        RequestTemplates:
          application/json: "{ statusCode: 200 }"
        Type: MOCK
      MethodResponses:
        - ResponseParameters:
            method.response.header.Access-Control-Allow-Headers: true
            method.response.header.Access-Control-Allow-Origin: true
            method.response.header.Access-Control-Allow-Methods: true
          StatusCode: "204"
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAPIGW/Default/base64/OPTIONS/Resource
  APICDKSTACKAPIGWbase64POSTApiPermissionAPICDKSTACKAPICDKSTACKAPIGW52E3ED44POSTbase646F9E0D39:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - APICDKSTACKAFunctionbase64FB05D81A
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: APICDKSTACKAPIGWAA193FB7
            - /
            - Ref: APICDKSTACKAPIGWDeploymentStageprod2B95DB1B
            - /POST/base64
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAPIGW/Default/base64/POST/ApiPermission.APICDKSTACKAPICDKSTACKAPIGW52E3ED44.POST..base64
  APICDKSTACKAPIGWbase64POSTApiPermissionTestAPICDKSTACKAPICDKSTACKAPIGW52E3ED44POSTbase64F7D750F1:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - APICDKSTACKAFunctionbase64FB05D81A
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: APICDKSTACKAPIGWAA193FB7
            - /test-invoke-stage/POST/base64
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAPIGW/Default/base64/POST/ApiPermission.Test.APICDKSTACKAPICDKSTACKAPIGW52E3ED44.POST..base64
  APICDKSTACKAPIGWbase64POSTF4EEA77B:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: POST
      ResourceId:
        Ref: APICDKSTACKAPIGWbase64EA201051
      RestApiId:
        Ref: APICDKSTACKAPIGWAA193FB7
      AuthorizationType: NONE
      Integration:
        IntegrationHttpMethod: POST
        Type: AWS_PROXY
        Uri:
          Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - ":apigateway:"
              - Ref: AWS::Region
              - :lambda:path/2015-03-31/functions/
              - Fn::GetAtt:
                  - APICDKSTACKAFunctionbase64FB05D81A
                  - Arn
              - /invocations
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAPIGW/Default/base64/POST/Resource
  APICDKSTACKAPIGWdownload8D56EFB7:
    Type: AWS::ApiGateway::Resource
    Properties:
      ParentId:
        Fn::GetAtt:
          - APICDKSTACKAPIGWAA193FB7
          - RootResourceId
      PathPart: download
      RestApiId:
        Ref: APICDKSTACKAPIGWAA193FB7
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAPIGW/Default/download/Resource
  APICDKSTACKAPIGWdownloadOPTIONSE6A94765:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: OPTIONS
      ResourceId:
        Ref: APICDKSTACKAPIGWdownload8D56EFB7
      RestApiId:
        Ref: APICDKSTACKAPIGWAA193FB7
      AuthorizationType: NONE
      Integration:
        IntegrationResponses:
          - ResponseParameters:
              method.response.header.Access-Control-Allow-Headers: "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'"
              method.response.header.Access-Control-Allow-Origin: "'*'"
              method.response.header.Access-Control-Allow-Methods: "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
            StatusCode: "204"
        RequestTemplates:
          application/json: "{ statusCode: 200 }"
        Type: MOCK
      MethodResponses:
        - ResponseParameters:
            method.response.header.Access-Control-Allow-Headers: true
            method.response.header.Access-Control-Allow-Origin: true
            method.response.header.Access-Control-Allow-Methods: true
          StatusCode: "204"
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAPIGW/Default/download/OPTIONS/Resource
  APICDKSTACKAPIGWdownloadGETApiPermissionAPICDKSTACKAPICDKSTACKAPIGW52E3ED44GETdownload099AD62A:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - APICDKSTACKAFunctiondownload7F42737A
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: APICDKSTACKAPIGWAA193FB7
            - /
            - Ref: APICDKSTACKAPIGWDeploymentStageprod2B95DB1B
            - /GET/download
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAPIGW/Default/download/GET/ApiPermission.APICDKSTACKAPICDKSTACKAPIGW52E3ED44.GET..download
  APICDKSTACKAPIGWdownloadGETApiPermissionTestAPICDKSTACKAPICDKSTACKAPIGW52E3ED44GETdownload3354CC8A:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - APICDKSTACKAFunctiondownload7F42737A
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: APICDKSTACKAPIGWAA193FB7
            - /test-invoke-stage/GET/download
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAPIGW/Default/download/GET/ApiPermission.Test.APICDKSTACKAPICDKSTACKAPIGW52E3ED44.GET..download
  APICDKSTACKAPIGWdownloadGET40EC633C:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: GET
      ResourceId:
        Ref: APICDKSTACKAPIGWdownload8D56EFB7
      RestApiId:
        Ref: APICDKSTACKAPIGWAA193FB7
      AuthorizationType: NONE
      Integration:
        IntegrationHttpMethod: POST
        Type: AWS_PROXY
        Uri:
          Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - ":apigateway:"
              - Ref: AWS::Region
              - :lambda:path/2015-03-31/functions/
              - Fn::GetAtt:
                  - APICDKSTACKAFunctiondownload7F42737A
                  - Arn
              - /invocations
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAPIGW/Default/download/GET/Resource
  APICDKSTACKAPIGWupload4022B0EB:
    Type: AWS::ApiGateway::Resource
    Properties:
      ParentId:
        Fn::GetAtt:
          - APICDKSTACKAPIGWAA193FB7
          - RootResourceId
      PathPart: upload
      RestApiId:
        Ref: APICDKSTACKAPIGWAA193FB7
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAPIGW/Default/upload/Resource
  APICDKSTACKAPIGWuploadOPTIONSAC423301:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: OPTIONS
      ResourceId:
        Ref: APICDKSTACKAPIGWupload4022B0EB
      RestApiId:
        Ref: APICDKSTACKAPIGWAA193FB7
      AuthorizationType: NONE
      Integration:
        IntegrationResponses:
          - ResponseParameters:
              method.response.header.Access-Control-Allow-Headers: "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'"
              method.response.header.Access-Control-Allow-Origin: "'*'"
              method.response.header.Access-Control-Allow-Methods: "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
            StatusCode: "204"
        RequestTemplates:
          application/json: "{ statusCode: 200 }"
        Type: MOCK
      MethodResponses:
        - ResponseParameters:
            method.response.header.Access-Control-Allow-Headers: true
            method.response.header.Access-Control-Allow-Origin: true
            method.response.header.Access-Control-Allow-Methods: true
          StatusCode: "204"
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAPIGW/Default/upload/OPTIONS/Resource
  APICDKSTACKAPIGWuploadPOSTApiPermissionAPICDKSTACKAPICDKSTACKAPIGW52E3ED44POSTuploadF98B80EB:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - APICDKSTACKAFunctionupload45BDC153
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: APICDKSTACKAPIGWAA193FB7
            - /
            - Ref: APICDKSTACKAPIGWDeploymentStageprod2B95DB1B
            - /POST/upload
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAPIGW/Default/upload/POST/ApiPermission.APICDKSTACKAPICDKSTACKAPIGW52E3ED44.POST..upload
  APICDKSTACKAPIGWuploadPOSTApiPermissionTestAPICDKSTACKAPICDKSTACKAPIGW52E3ED44POSTupload344D9286:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - APICDKSTACKAFunctionupload45BDC153
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: APICDKSTACKAPIGWAA193FB7
            - /test-invoke-stage/POST/upload
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAPIGW/Default/upload/POST/ApiPermission.Test.APICDKSTACKAPICDKSTACKAPIGW52E3ED44.POST..upload
  APICDKSTACKAPIGWuploadPOSTC2E4BC2D:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: POST
      ResourceId:
        Ref: APICDKSTACKAPIGWupload4022B0EB
      RestApiId:
        Ref: APICDKSTACKAPIGWAA193FB7
      AuthorizationType: NONE
      Integration:
        IntegrationHttpMethod: POST
        Type: AWS_PROXY
        Uri:
          Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - ":apigateway:"
              - Ref: AWS::Region
              - :lambda:path/2015-03-31/functions/
              - Fn::GetAtt:
                  - APICDKSTACKAFunctionupload45BDC153
                  - Arn
              - /invocations
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAPIGW/Default/upload/POST/Resource
  APICDKSTACKAPIGWuploadpythonD7EF7848:
    Type: AWS::ApiGateway::Resource
    Properties:
      ParentId:
        Fn::GetAtt:
          - APICDKSTACKAPIGWAA193FB7
          - RootResourceId
      PathPart: upload-python
      RestApiId:
        Ref: APICDKSTACKAPIGWAA193FB7
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAPIGW/Default/upload-python/Resource
  APICDKSTACKAPIGWuploadpythonOPTIONS1C6C20BC:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: OPTIONS
      ResourceId:
        Ref: APICDKSTACKAPIGWuploadpythonD7EF7848
      RestApiId:
        Ref: APICDKSTACKAPIGWAA193FB7
      AuthorizationType: NONE
      Integration:
        IntegrationResponses:
          - ResponseParameters:
              method.response.header.Access-Control-Allow-Headers: "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'"
              method.response.header.Access-Control-Allow-Origin: "'*'"
              method.response.header.Access-Control-Allow-Methods: "'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"
            StatusCode: "204"
        RequestTemplates:
          application/json: "{ statusCode: 200 }"
        Type: MOCK
      MethodResponses:
        - ResponseParameters:
            method.response.header.Access-Control-Allow-Headers: true
            method.response.header.Access-Control-Allow-Origin: true
            method.response.header.Access-Control-Allow-Methods: true
          StatusCode: "204"
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAPIGW/Default/upload-python/OPTIONS/Resource
  APICDKSTACKAPIGWuploadpythonPOSTApiPermissionAPICDKSTACKAPICDKSTACKAPIGW52E3ED44POSTuploadpythonDFEA7A09:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - APICDKSTACKAFunctionuploadpython7A5133DA
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: APICDKSTACKAPIGWAA193FB7
            - /
            - Ref: APICDKSTACKAPIGWDeploymentStageprod2B95DB1B
            - /POST/upload-python
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAPIGW/Default/upload-python/POST/ApiPermission.APICDKSTACKAPICDKSTACKAPIGW52E3ED44.POST..upload-python
  APICDKSTACKAPIGWuploadpythonPOSTApiPermissionTestAPICDKSTACKAPICDKSTACKAPIGW52E3ED44POSTuploadpython3D93CB34:
    Type: AWS::Lambda::Permission
    Properties:
      Action: lambda:InvokeFunction
      FunctionName:
        Fn::GetAtt:
          - APICDKSTACKAFunctionuploadpython7A5133DA
          - Arn
      Principal: apigateway.amazonaws.com
      SourceArn:
        Fn::Join:
          - ""
          - - "arn:"
            - Ref: AWS::Partition
            - ":execute-api:"
            - Ref: AWS::Region
            - ":"
            - Ref: AWS::AccountId
            - ":"
            - Ref: APICDKSTACKAPIGWAA193FB7
            - /test-invoke-stage/POST/upload-python
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAPIGW/Default/upload-python/POST/ApiPermission.Test.APICDKSTACKAPICDKSTACKAPIGW52E3ED44.POST..upload-python
  APICDKSTACKAPIGWuploadpythonPOST3076305A:
    Type: AWS::ApiGateway::Method
    Properties:
      HttpMethod: POST
      ResourceId:
        Ref: APICDKSTACKAPIGWuploadpythonD7EF7848
      RestApiId:
        Ref: APICDKSTACKAPIGWAA193FB7
      AuthorizationType: NONE
      Integration:
        IntegrationHttpMethod: POST
        Type: AWS_PROXY
        Uri:
          Fn::Join:
            - ""
            - - "arn:"
              - Ref: AWS::Partition
              - ":apigateway:"
              - Ref: AWS::Region
              - :lambda:path/2015-03-31/functions/
              - Fn::GetAtt:
                  - APICDKSTACKAFunctionuploadpython7A5133DA
                  - Arn
              - /invocations
    Metadata:
      aws:cdk:path: API-CDK-STACK/API-CDK-STACKAPIGW/Default/upload-python/POST/Resource
Parameters:
  AssetParameters034e42a031aebc87c9370f0fb9dbe527e0c4ba0cbddb2e56966f8efa8173cf51S3Bucket0AF3E0E6:
    Type: String
    Description: S3 bucket for asset "034e42a031aebc87c9370f0fb9dbe527e0c4ba0cbddb2e56966f8efa8173cf51"
  AssetParameters034e42a031aebc87c9370f0fb9dbe527e0c4ba0cbddb2e56966f8efa8173cf51S3VersionKey6DC69AF7:
    Type: String
    Description: S3 key for asset version "034e42a031aebc87c9370f0fb9dbe527e0c4ba0cbddb2e56966f8efa8173cf51"
  AssetParameters034e42a031aebc87c9370f0fb9dbe527e0c4ba0cbddb2e56966f8efa8173cf51ArtifactHash8FE91348:
    Type: String
    Description: Artifact hash for asset "034e42a031aebc87c9370f0fb9dbe527e0c4ba0cbddb2e56966f8efa8173cf51"
  AssetParameters61b51eb846a05d13bcfebe38e3bb9344afcca98f3e700e31bb49587c0eba17e6S3BucketC5C365DC:
    Type: String
    Description: S3 bucket for asset "61b51eb846a05d13bcfebe38e3bb9344afcca98f3e700e31bb49587c0eba17e6"
  AssetParameters61b51eb846a05d13bcfebe38e3bb9344afcca98f3e700e31bb49587c0eba17e6S3VersionKeyB0F40A0B:
    Type: String
    Description: S3 key for asset version "61b51eb846a05d13bcfebe38e3bb9344afcca98f3e700e31bb49587c0eba17e6"
  AssetParameters61b51eb846a05d13bcfebe38e3bb9344afcca98f3e700e31bb49587c0eba17e6ArtifactHashF87CEB88:
    Type: String
    Description: Artifact hash for asset "61b51eb846a05d13bcfebe38e3bb9344afcca98f3e700e31bb49587c0eba17e6"
  AssetParameters4ac6bc7fb9d370fe4b779bfaf58aa61892f6642b679b8fdcb6c8ebdafff530b2S3Bucket6F338FE4:
    Type: String
    Description: S3 bucket for asset "4ac6bc7fb9d370fe4b779bfaf58aa61892f6642b679b8fdcb6c8ebdafff530b2"
  AssetParameters4ac6bc7fb9d370fe4b779bfaf58aa61892f6642b679b8fdcb6c8ebdafff530b2S3VersionKey2EE7EB44:
    Type: String
    Description: S3 key for asset version "4ac6bc7fb9d370fe4b779bfaf58aa61892f6642b679b8fdcb6c8ebdafff530b2"
  AssetParameters4ac6bc7fb9d370fe4b779bfaf58aa61892f6642b679b8fdcb6c8ebdafff530b2ArtifactHash9B77013D:
    Type: String
    Description: Artifact hash for asset "4ac6bc7fb9d370fe4b779bfaf58aa61892f6642b679b8fdcb6c8ebdafff530b2"
  AssetParametersf21a37c59d98e46e3df1a64875a26678a7b70d57c069375fa7a7886903922effS3BucketA3730A56:
    Type: String
    Description: S3 bucket for asset "f21a37c59d98e46e3df1a64875a26678a7b70d57c069375fa7a7886903922eff"
  AssetParametersf21a37c59d98e46e3df1a64875a26678a7b70d57c069375fa7a7886903922effS3VersionKeyE8C11D18:
    Type: String
    Description: S3 key for asset version "f21a37c59d98e46e3df1a64875a26678a7b70d57c069375fa7a7886903922eff"
  AssetParametersf21a37c59d98e46e3df1a64875a26678a7b70d57c069375fa7a7886903922effArtifactHash72FBF9C5:
    Type: String
    Description: Artifact hash for asset "f21a37c59d98e46e3df1a64875a26678a7b70d57c069375fa7a7886903922eff"
  AssetParameters19ad61d00dd67e19723fb50dc315e6c1da6b8b9f2eac18df76c67b16155e135cS3BucketF2898260:
    Type: String
    Description: S3 bucket for asset "19ad61d00dd67e19723fb50dc315e6c1da6b8b9f2eac18df76c67b16155e135c"
  AssetParameters19ad61d00dd67e19723fb50dc315e6c1da6b8b9f2eac18df76c67b16155e135cS3VersionKey8AFEB58E:
    Type: String
    Description: S3 key for asset version "19ad61d00dd67e19723fb50dc315e6c1da6b8b9f2eac18df76c67b16155e135c"
  AssetParameters19ad61d00dd67e19723fb50dc315e6c1da6b8b9f2eac18df76c67b16155e135cArtifactHash824A3BE8:
    Type: String
    Description: Artifact hash for asset "19ad61d00dd67e19723fb50dc315e6c1da6b8b9f2eac18df76c67b16155e135c"
Outputs:
  APICDKSTACKAPIGWEndpointF8CFD52F:
    Value:
      Fn::Join:
        - ""
        - - https://
          - Ref: APICDKSTACKAPIGWAA193FB7
          - .execute-api.
          - Ref: AWS::Region
          - "."
          - Ref: AWS::URLSuffix
          - /
          - Ref: APICDKSTACKAPIGWDeploymentStageprod2B95DB1B
          - /

